
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>新增收货地址</title>
    <meta content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <script type="text/javascript" src="/assets/javascripts/jquery/jquery-1.9.1.js"></script>
    <script type="text/javascript" src="/assets/javascripts/jquery/area.js"></script>
    <script type="text/javascript" src="/assets/javascripts/my.js"></script>
    <script type="text/javascript" src="/assets/javascripts/comfunc.js"></script>
    <link rel="stylesheet" href="/assets/stylesheets/global.css">
    <link rel="stylesheet" href="/assets/stylesheets/address.css">
    <link rel="shortcut icon" type="image/png" href="/assets/images/favicon.png">
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=dS81RTRZ2KavPD5HFlBdWcWp65S1gVpK"></script>

</head>
<body>

<div id="loading">
    <img src="/assets/images/loading.gif"/>
</div>


<header class="head">
    <a href="/address/0" class="back">
        <i></i>
        <b></b>
    </a>
    <h1>管理地址</h1>
</header>

<div class="fixed-box" style="position:fixed;width: 100%">
<div class="scope wap">
    <form id="cell_addressForm">
        <input  id="addId" name="addId" value="0" type="hidden"/>
       <div class="add-s">
           <input  placeholder="请输入收货人" id="name" name="name">
       </div>

        <div class="add-s">
            <input placeholder="请输入联系电话" id="tel" name="tel">
        </div>
        <div class="add-s">
            <input placeholder="身份证" id="idCardNum" name="idCardNum">
        </div>

        <div id="addAddress">
            <div class="address_input">
                <input class="address_input1" type="text" placeholder="请选择省市" id="shengshi" onClick="getProvinceBuy()" readonly="readonly">
            </div>
        </div>

        <input  type="hidden" id="province" name="province"/>
        <input  type="hidden" id="city" name="city" />
        <input  type="hidden" id="area" name="area" />
        <input  type="hidden" id="area_code" name="area_code" />
        <input  type="hidden" id="city_code" name="city_code" />
        <input  type="hidden" id="province_code" name="province_code" />


        <div class="add-s">
            <input placeholder="输入详细地址" id="deliveryDetail" name="deliveryDetail">
        </div>

        <div class="add-m">
            <span><input class="btn" type="checkbox" id="orDefault" name="orDefault"/>设为默认</span>
        </div>

        <div class="cue">
            <p class="color">提示:</p>
            <p>1.海关需要对海外购物查验身份信息，错误信息可能导致无法通关。</p>
            <p>2.身份信息将加密报关，韩秘美将保证您的信息安全。</p>
        </div>
        <input type="hidden" id="selId" name="selId" value="0">
        <input type="hidden" class="formSubmitTimes" value="0"/>
    </form>
    <button class="plus-add bg addAddressBtn">添加</button>

    <div id="allmap" style="width:100%;height:500px;"></div>
    <script type="text/javascript">
	// 百度地图API功能
	var map = new BMap.Map("allmap");
	var point = new BMap.Point(116.331398,39.897445);

	map.centerAndZoom(point,12);
	map.enableScrollWheelZoom(true);
	map.enableDragging();   //开启拖拽
	var geoc = new BMap.Geocoder();

	var geolocation = new BMap.Geolocation();
	geolocation.getCurrentPosition(function(r){
		if(this.getStatus() == BMAP_STATUS_SUCCESS){
			var mk = new BMap.Marker(r.point);
			map.addOverlay(mk);
			map.panTo(r.point);
			console.log('您的位置：'+r.point.lng+','+r.point.lat);

			geoc.getLocation(r.point, function(rs){
                var addComp = rs.addressComponents;
                console.log(addComp.province + ", " + addComp.city + ", " + addComp.district + ", " + addComp.street + ", " + addComp.streetNumber);
                getAddressFromBMap(addComp.province,addComp.city,addComp.district,addComp.street,addComp.streetNumber);
            });

		}
		else {
			alert('failed'+this.getStatus());
		}
	},{enableHighAccuracy: true})



	map.addEventListener("click", function(e){
		var pt = e.point;
		geoc.getLocation(pt, function(rs){
			var addComp = rs.addressComponents;
			 console.log(addComp.province + ", " + addComp.city + ", " + addComp.district + ", " + addComp.street + ", " + addComp.streetNumber);
			getAddressFromBMap(addComp.province,addComp.city,addComp.district,addComp.street,addComp.streetNumber);
		});
	});
</script>

</div>
</div>

<div class="hint" id="tip" style="display:none"></div>
@comContent()
</body>
</html>
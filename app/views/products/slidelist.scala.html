<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- 视图窗口，移动端特属的标签。 -->
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no" />
    <!-- 是否启动webapp功能，会删除默认的苹果工具栏和菜单栏。 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <!-- 忽略页面中的数字识别为电话号码,email识别 -->
    <meta name="format-detection"content="telephone=no, email=no" />
    <link rel="stylesheet" href="/assets/stylesheets/global.css"/>
    <link rel="stylesheet" href="/assets/stylesheets/list.css"/>
    <style>
        .content{
            padding:44px 0 0 0;}
    </style>
    <script src="/assets/javascripts/jquery/jquery-1.9.1.min.js"></script>
    <script>
        $(window).load(function(){
            $("#loading").hide();
        });

    </script>
</head>
<body>

    <div id="loading">
        <img src="/assets/images/loading.gif"/>
    </div>

    <header class="head">
        <a href="/" class="back"></a>
        <h1>滑动列表页</h1>
        <a href="/cart" class="shopp">
            <span class="cart_num" id="cartAmountSpan"><i>0</i></span>
        </a>
    </header>


    <div class="content scope">
        <ul class="product col">
            <li class="clearfix">
                <a class="redirect-app" href="/detail/item/888351/111674">
                    <p class="figure figure-f">
                        <img src="/assets/images/HMM--list_01.jpg">
                    </p>
                    <p class="title-hd">EXO LOGO纯色T恤</p>
                    <span class="title-fd">
                        <i class="naw">¥563</i>

                             <i class="agio">¥799</i>
                             <b>7折</b>

                    </span>
                </a>

                <a class="redirect-app" href="/detail/item/888351/111672">
                    <p class="figure figure-f">
                        <img src="/assets/images/HMM--list_01.jpg">
                    </p>
                    <p class="title-hd">EXO LOGO纯色T恤</p>
                    <span class="title-fd">
                        <i class="naw">¥563</i>
                        <i class="agio">¥799</i>
                        <b>7折</b>
                    </span>
                </a>
            </li>
        </ul>

    </div>



    <script type="text/javascript">

        $(function(){

            //url data function dataType

            function loadMeinv(){

                var data = 0;

                for(var i=0;i<9;i++){//每次加载时模拟随机加载图片

                    data = parseInt(Math.random()*9);

                    var html = "";

                    html = '<li class="clearfix"><a class="redirect-app" href="/detail/item/888351/111670"><p class="figure figure-f"> <img src="/assets/images/'+data+'.jpg"> </p> <p class="title-hd">EXO LOGO纯色T恤</p> <span class="title-fd"> <i class="naw">¥563</i> <i class="agio">¥799</i> <b>7折</b></span></a> <a class="redirect-app" href="/detail/item/888351/111668"><p class="figure figure-f"><img src="/assets/images/'+data+'.jpg"></p><p class="title-hd">EXO LOGO纯色T恤</p><span class="title-fd"><i class="naw">¥563</i> <i class="agio">¥799</i> <b>7折</b> </span> </a> </li>';

                    $minUl = getMinUl();

                    $minUl.append(html);
                }
            }

            loadMeinv();

            $(window).on("scroll",function(){

                $minUl = getMinUl();

                if($minUl.height() <= $(window).scrollTop()+$(window).height()){

                    //当最短的ul的高度比窗口滚出去的高度+浏览器高度大时加载新图片

                    loadMeinv();

                }

            })

            function getMinUl(){//每次获取最短的ul,将图片放到其后

                var $arrUl = $(".content .product");

                var $minUl =$arrUl.eq(0);

                $arrUl.each(function(index,elem){

                    if($(elem).height()<$minUl.height()){

                        $minUl = $(elem);

                    }

                });

                return $minUl;

            }

        })

    </script>


</body>
</html>
@(sliderList:List[domain.Slider],themeList:List[domain.Theme])
@scripts = {
<link rel="stylesheet" href="/assets/stylesheets/hp.css">
<script src="/assets/javascripts/jquery-1.11.1.min.js"></script>
<script src="/assets/javascripts/jquery/TouchSlide.1.1.js"></script>
<script src="/assets/javascripts/hp.js"></script>
<script src="/assets/javascripts/jquery/jquery-1.9.1.min.js"></script>
}

@layout(title="韩秘美,专卖韩国正品")(scripts) {
<!--头部-->
	<div class="battener">
		<header class="batten">
			<!--<span class="icon-search-title" id="searchBtn"></span>-->
			<h1>
				韩秘美
			</h1>
			<a href="/personal"><span class="icon-user-title" id="userBtn"></span></a>
			<a href="/" class="shopp">
				<i></i>
				<span class="cart_num">0</span>
			</a>

		</header>
	</div>



<!--主体	-->
	<div id='screen_wrap'>

		<!--banner开始-->

		<!-- 本例主要代码 Start ================================ -->
		<div id="slideBox" class="slideBox">

			<div class="bd">
				<ul>
					@for(slider <- sliderList){
						@if(slider.getTargetType() == "D" || slider.getTargetType() == "P"){
							<li>
								<a class="pic" href="/detail/@slider.getTargetType()/@slider.getItemTarget()"><img src="@slider.getImg()" /></a>
							</li>
						}
						@if(slider.getTargetType() == "U"){
						<li>
							<a class="pic" href="@slider.getItemTarget()"><img src="@slider.getImg()" /></a>
						</li>
						}
						@if(slider.getTargetType() == "T"){
						<li>
							<a class="pic" href="/pin/list/@slider.getItemTarget()"><img src="@slider.getImg()" /></a>
						</li>
						}

					}
				</ul>
			</div>

			<div class="hd">
				<ul></ul>
			</div>
		</div>
		<script type="text/javascript">
			TouchSlide({
				slideCell:"#slideBox",
				titCell:".hd ul", //开启自动分页 autoPage:true ，此时设置 titCell 为导航元素包裹层
				mainCell:".bd ul",
				effect:"leftLoop",
				autoPage:true,//自动分页
				autoPlay:true //自动播放
			});
		</script>
		<!-- 本例主要代码 End ================================ -->

        <!--内容开始-->
		<div class="con">

			<div id="container">
				<ul class="col">
					@for(theme <- themeList){
						@if(theme. getType() == "ordinary"){
							<li><a href="/pin/list/@theme.getThemeUrl()"><img src="@theme.getThemeImg()"/></a></li>
						}
						@if(theme. getType() == "h5"){
						<li><a href="@theme.getThemeUrl()"><img src="@theme.getThemeImg()"/></a></li>
						}
					}
				</ul>
			</div>
		</div>

		<script type="text/javascript">

			$(function(){
				var pageCount = 2;
				var ajaxStop = false;


				//url data function dataType
				function loadMeinv(){
					var url = "/indexAjax";
					if(!ajaxStop){
						$.ajax({
							type: 'POST', 
							url:  url, 
							data: JSON.stringify(pageCount), 
							contentType: "application/json; charset=utf-8", 
							dataType: 'json',
							success: function(data) { 
								if(data.length != 0){
									for(var i=0;i<data.length;i++){
										if(data[i].type == "ordinary"){
											var html = '<li><a href="/pin/list/'+ data[i].themeUrl+ '"><img src="' + data[i].themeImg + '"/></a></li>'; 
											$minUl = getMinUl(); 
											$minUl.append(html); 
										}
										if(data[i].type == "h5"){
											var html = '<li><a href='+ data[i].themeUrl+ '"><img src="' + data[i].themeImg + '"/></a></li>'; 
											$minUl = getMinUl(); 
											$minUl.append(html); 
										}
									}
									pageCount = pageCount + 1;
								}
								else{
									ajaxStop = true;
								}
							}, 
							error: function() { 
							console.log("ajax get data fail!");
							}
						});
					}
					<!--var data = 0;-->
					<!--for(var i=0;i<4;i++){//每次加载时模拟随机加载图片-->
						<!--data = parseInt(Math.random()*4);-->
						<!--var html = "";-->
						<!--html = '<li><img src =/assets/images/'-->
								<!--+data+'.jpg></li>';-->
						<!--$minUl = getMinUl();-->
						<!--$minUl.append(html);-->
					<!--}-->
				}

				loadMeinv();

				$(window).on("scroll",function(){
					$minUl = getMinUl();
					if($minUl.height() <= $(window).scrollTop()+$(window).height()){
						//当最短的ul的高度比窗口滚出去的高度+浏览器高度大时加载新图片
						loadMeinv();
					}
				})

				function getMinUl(){//每次获取最短的ul,将图片放到其后
					var $arrUl = $("#container .col");
					var $minUl =$arrUl.eq(0);
					$arrUl.each(function(index,elem){
						if($(elem).height()<$minUl.height()){
							$minUl = $(elem);
						}
					});
					return $minUl;
				}
			})
		</script>

		<div class="top">
			<img src="/assets/images/top.png">
		</div>
</div>

}